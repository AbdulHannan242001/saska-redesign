import React, { useEffect, useRef } from "react";
import Card from "./Card";
import graphic from "../../../assets/svg/graphic.svg";
import frontend from "../../../assets/svg/frontend.svg";
import software from "../../../assets/svg/software.svg";
import web from "../../../assets/svg/web.svg";
import automation from "../../../assets/svg/automation.svg";
import wordpress from "../../../assets/svg/wordpress.svg";
import { motion, useInView } from "framer-motion";
import { useLocation } from "react-router-dom";

const Services = () => {
  const ref = useRef(null);
  const isInView = useInView(ref, { once: true, margin: "-100px" });
  const location = useLocation();

  const services = [
    {
      id: "design",
      title: "UI/UX Design",
      media: frontend,
      description:
        "We craft user experiences that are intuitive, engaging, and conversion-focused. Our design process is rooted in understanding user behavior, ensuring every click feels natural and every interaction adds value. Choose us for designs that elevate user satisfaction and drive results.",
    },
    {
      id: "web",
      title: "Web Development",
      media: web,
      description:
        "We build responsive, high-performance websites using the latest technologies. From seamless navigation to optimized loading speeds, every line of code is crafted for maximum impact. Partner with us for web solutions that not only meet today's standards but are ready for tomorrow's demands.",
    },

    {
      id: "graphics",
      title: "Graphics Design",
      media: graphic,
      description:
        "We design compelling graphics that reflect your brand’s identity and capture attention. From logos to marketing materials, we ensure every design leaves a lasting impression—helping you stand out in a crowded market.",
    },
    {
      id: "scripting",
      title: "Scripting & Automation",
      media: automation,
      description:
        "We automate your repetitive and time-consuming tasks, saving you valuable hours and reducing errors. Whether it’s data processing, system integration, or workflow automation, we design solutions that boost efficiency and let you focus on what truly matters.",
    },
    {
      id: "software",
      title: "Software Development",
      media: software,
      description:
        "We develop scalable and tailored software solutions that solve real business challenges. Our approach ensures flexibility, efficiency, and growth potential—helping you stay ahead in a competitive market.",
    },
    {
      id: "wordpress",
      title: "Wordpress & Ecommerce",
      media: wordpress,
      description:
        "We create custom WordPress sites and e-commerce stores that are easy to manage and built to convert. From smooth navigation to secure checkouts, we focus on delivering seamless shopping experiences that drive sales and build trust.",
    },
  ];

  const paths = [
    "M413.106 1561.8C360.265 1054.39 345.277 854.14 451.534 691.457C477.529 651.66 504.516 612.66 533.97 570.094C620.397 445.193 728.099 289.528 893.783 -6.21907L893.987 -5.59149C728.329 290.111 620.629 445.757 534.212 570.66C504.742 613.246 477.743 652.269 451.787 692.007C345.692 854.436 360.645 1054.53 413.436 1561.46L413.106 1561.8Z",
    "M412.694 1562.22L411.803 1555.13C351.839 1077.47 325.338 866.378 459.782 707.859C555.87 594.551 631.394 483.636 744.105 278.483C787.462 199.569 836.329 106.692 893.979 -5.61416L894.186 -4.97986C836.566 107.282 787.714 200.111 744.372 279.001C631.646 484.202 556.105 595.129 459.998 708.452C325.752 866.751 352.232 1077.69 412.158 1555.04L413.019 1561.89L412.694 1562.22Z",
    "M411.523 1563.42C409.732 1551.36 407.962 1539.46 406.212 1527.71C341.363 1092.15 309.2 876.099 468.025 724.267C620.47 578.532 689.712 430.243 852.392 81.8452C865.517 53.7321 879.282 24.2811 893.688 -6.50792L893.898 -5.86357C879.494 24.8905 865.752 54.2872 852.674 82.3264C689.966 430.784 620.713 579.101 468.214 724.875C309.623 876.498 341.764 1092.37 406.562 1527.6C408.299 1539.26 410.059 1551.1 411.843 1563.09L411.523 1563.42Z",
    "M409.577 1565.41C407.191 1551.64 404.835 1538.07 402.509 1524.69C330.924 1112.64 291.982 888.435 476.266 740.675C637.283 611.563 693.162 475.194 805.858 200.142C831.324 137.981 859.7 68.7316 892.842 -9.10888L893.054 -8.45781C859.948 69.3011 831.6 138.49 806.153 200.596C693.426 475.733 637.534 612.148 476.438 741.313C292.427 888.856 331.339 1112.86 402.855 1524.54C405.17 1537.86 407.515 1551.38 409.892 1565.09L409.577 1565.41Z",
    "M406.842 1568.22C404.555 1556.73 402.289 1545.37 400.045 1534.14C320.667 1136.57 273.89 902.195 484.506 757.094C661.663 635.051 708.107 501.65 795.306 251.222C821.906 174.824 852.308 87.5209 891.361 -13.6593L891.579 -12.988C852.575 88.0883 822.196 175.31 795.62 251.652C708.388 502.191 661.921 635.642 484.664 757.751C274.356 902.626 321.09 1136.78 400.389 1533.97C402.621 1545.15 404.878 1556.46 407.159 1567.9L406.842 1568.22Z",
    "M403.32 1571.82C401.731 1564.8 400.154 1557.83 398.588 1550.93C310.688 1162.84 254.964 916.804 492.743 773.51C688.627 655.466 726.707 522.103 795.014 282.875C819.574 196.866 848.05 97.1619 889.16 -20.4216L889.378 -19.7503C848.323 97.7006 819.876 197.308 795.338 283.246C726.984 522.611 688.892 656.04 492.89 774.156C255.45 917.241 311.117 1163.03 398.924 1550.7C400.484 1557.58 402.053 1564.51 403.633 1571.49L403.32 1571.82Z",
    "M399.018 1576.23L398.07 1572.5C374.774 1480.88 353.275 1396.33 337.739 1318.77C288.577 1073.34 299.067 897.868 500.978 789.927C716.867 674.516 746.862 539.835 798.871 306.291C819.843 212.12 844.406 101.873 886.154 -29.6588L886.38 -28.9641C844.693 102.393 820.157 212.52 799.205 306.598C747.157 540.303 717.141 675.082 501.107 790.57C299.482 898.379 288.997 1073.57 338.079 1318.59C353.612 1396.13 375.106 1480.66 398.401 1572.27L399.324 1575.91L399.018 1576.23Z",
    "M393.95 1581.42C363.666 1474.34 336.184 1375.8 319.586 1286.44C279.071 1068.4 303.257 905.115 509.218 806.346C745.885 692.829 767.776 556.093 804.692 325.447C821.009 223.492 840.268 103.18 882.291 -41.528L882.522 -40.8165C840.586 103.71 821.342 223.868 805.043 325.709C768.093 556.557 746.186 693.433 509.341 807.012C303.656 905.65 279.48 1068.62 319.93 1286.27C336.521 1375.56 363.986 1474.07 394.256 1581.1L393.95 1581.42Z",
    "M388.14 1587.37C353.049 1474.75 321.683 1370.28 305.257 1275.76C269.959 1072.63 303.623 915.591 517.453 822.765C775.469 710.758 789.08 571.45 811.488 342.073C822.229 232.235 834.974 101.76 877.507 -56.2241L877.743 -55.4992C835.308 102.273 822.567 232.586 811.853 342.29C789.417 571.883 775.79 711.338 517.565 823.433C304.009 916.139 270.365 1072.89 305.599 1275.61C322.014 1370.05 353.366 1474.48 388.445 1587.06L388.14 1587.37Z",
    "M381.617 1594.05C342.739 1479.8 308.479 1372.53 292.577 1275.36C260.832 1081.39 302.168 927.696 525.687 839.193C805.498 728.397 810.58 586.199 818.767 357.104C822.981 239.08 828.048 98.0028 871.828 -73.6753L872.063 -72.9537C828.393 98.4593 823.337 239.338 819.125 357.211C810.935 586.583 805.84 728.965 525.793 839.854C302.549 928.258 261.243 1081.65 292.922 1275.21C308.81 1372.31 343.058 1479.53 381.922 1593.74L381.617 1594.05Z",
    "M374.415 1601.43C332.464 1487.63 296.027 1379.27 280.764 1280.8C251.614 1092.74 299.66 940.753 533.919 855.607C835.904 745.843 832.151 600.491 826.219 370.986C822.949 244.381 819.044 92.1814 865.31 -93.7003L865.553 -92.9553C819.429 92.6424 823.324 244.614 826.59 371.041C832.526 600.868 836.286 746.433 534.026 856.293C300.036 941.33 252.031 1093.02 281.113 1280.67C296.362 1379.06 332.789 1487.35 374.719 1601.11L374.415 1601.43Z",
    "M366.568 1609.46C322.122 1497.24 284.058 1388.88 269.468 1289.97C242.303 1105.79 296.477 954.443 542.152 872.026C866.658 763.165 853.722 614.447 833.682 384.07C821.885 248.486 807.656 84.6697 858.086 -115.884L858.332 -115.129C808.054 85.095 822.263 248.659 834.038 384.032C854.11 614.783 867.069 763.742 542.251 872.708C296.847 955.031 242.718 1106.1 269.816 1289.85C284.391 1388.67 322.442 1496.97 366.875 1609.15L366.568 1609.46Z",
    "M358.123 1618.11C311.647 1508.12 272.419 1400.43 258.496 1301.65C232.895 1120.01 292.813 968.576 550.386 888.446C897.743 780.406 875.241 628.128 841.025 396.524C819.635 251.707 793.703 75.9017 850.433 -139.414L850.668 -138.689C794.123 76.2861 820.011 251.805 841.374 396.403C875.657 628.432 898.188 780.957 550.482 889.126C293.177 969.188 233.303 1120.3 258.849 1301.54C272.756 1400.21 311.97 1507.84 358.429 1617.8L358.123 1618.11Z",
    "M349.115 1627.34C301.025 1519.91 261.024 1413.37 247.746 1315.14C223.403 1135.07 288.815 983.021 558.619 904.866C856.996 818.434 894.046 700.493 871.831 536.158C866.457 496.387 857.613 453.895 848.162 408.478C816.066 254.257 777.006 66.3016 842.576 -163.554L842.812 -162.829C777.458 66.645 816.458 254.295 848.492 408.292C857.948 453.736 866.797 496.253 872.178 536.057C894.45 700.814 857.383 819.035 558.705 905.556C289.166 983.633 223.799 1135.35 248.091 1315.04C261.365 1413.15 301.353 1519.64 349.424 1627.02L349.115 1627.34Z",
    "M339.591 1637.09C290.257 1532.4 249.813 1427.32 237.148 1329.95C213.84 1150.74 284.55 997.704 566.852 921.291C860.614 841.764 911.532 732.724 892.334 585.117C885.78 534.723 871.054 479.803 855.028 420.025C812.245 260.444 760.196 66.2863 829.26 -169.242L829.902 -169.899C760.468 65.8465 812.551 260.127 855.35 419.758C871.385 479.571 886.12 534.527 892.686 585.011C911.938 733.038 860.999 842.355 566.941 921.961C284.911 998.319 214.243 1151.04 237.5 1329.85C250.147 1427.1 290.581 1532.13 339.9 1636.78L339.591 1637.09Z",
    "M239.329 1413.36C233.746 1390.52 229.443 1367.96 226.658 1345.77C204.214 1166.9 280.103 1012.57 575.086 937.711C869.517 862.985 929.781 759.595 912.54 622.281C905.316 564.719 884.481 501.15 861.565 431.233C809.558 272.552 746.877 81.176 807.899 -147.365L808.505 -147.986C747.144 80.7143 809.859 272.186 861.881 430.906C884.816 500.88 905.665 564.496 912.904 622.18C930.189 759.924 869.891 863.591 575.173 938.391C280.455 1013.19 204.619 1167.21 227.013 1345.68C230.003 1369.51 234.742 1393.78 240.952 1418.35L239.329 1413.36ZM329.587 1647.34C310.712 1609.05 293.199 1570.56 278.046 1532.32L275.971 1525.95C291.659 1566.18 310.023 1606.71 329.9 1647.02L329.587 1647.34Z",
    "M213.737 1334.73C203.56 1167.51 291.449 1023.8 583.317 954.129C880.996 883.098 948.631 783.735 932.827 653.54C925.168 590.442 897.92 520.047 867.758 442.123C806.717 284.417 733.783 95.898 786.779 -125.734L787.366 -126.335C734.024 95.4266 806.988 284.036 868.037 441.761C898.226 519.752 925.505 590.203 933.176 653.46C949.03 784.078 881.358 883.729 583.394 954.82C290.985 1024.58 203.465 1168.63 214.177 1336.08L213.737 1334.73ZM319.15 1658.03L318.623 1657L317.784 1654.42C318.344 1655.51 318.902 1656.61 319.464 1657.71L319.15 1658.03Z",
    "M203.806 1304.22C214.183 1156.97 316.594 1032.4 591.548 970.551C894.011 902.518 967.941 806.19 953.239 681.247C945.273 613.55 911.295 537.377 873.543 452.75C803.658 296.088 720.873 110.462 765.927 -104.378L766.472 -104.936C721.104 109.992 803.925 295.675 873.812 452.34C911.598 537.044 945.607 613.285 953.596 681.172C968.348 806.534 894.37 903.143 591.632 971.24C316.376 1033.15 214.166 1157.85 204.108 1305.15L203.806 1304.22Z",
    "M198.511 1287.95C223.571 1154.67 335.57 1043.12 599.782 986.971C908.044 921.46 987.61 827.504 973.788 706.582C965.594 634.876 924.562 553.591 878.898 463.137C800.362 307.567 708.179 124.864 745.387 -83.3412L745.916 -83.8833C708.404 124.369 800.606 307.129 879.148 462.693C924.856 553.232 965.927 634.589 974.145 706.507C988.015 827.85 908.395 922.09 599.856 987.66C335.454 1043.85 223.589 1155.45 198.763 1288.72L198.511 1287.95Z",
    "M195.676 1279.24C232.276 1156.68 351.456 1055.01 608.015 1003.4C922.79 940.057 1007.56 847.993 994.463 730.212C986.087 654.89 937.676 568.95 883.787 473.286C848.205 410.121 810.238 342.718 779.807 271.297C735.862 168.156 707.657 56.6483 725.051 -62.5137L725.53 -63.0042C707.953 56.2115 736.135 167.769 780.084 270.915C810.495 342.289 848.454 409.678 884.024 472.824C937.965 568.578 986.42 654.598 994.825 730.155C1007.97 848.343 923.137 940.69 608.092 1004.08C351.395 1055.72 232.321 1157.41 195.907 1279.95L195.676 1279.24Z",
    "M194.111 1274.43C240.638 1161 365.749 1067.62 616.246 1019.81C938.06 958.398 1027.75 867.86 1015.26 752.61C1006.74 673.95 950.614 583.662 888.2 483.246C840.649 406.745 789.449 324.373 752.815 236.734C716.111 148.899 694.063 55.7912 704.974 -41.9517L705.428 -42.4166C694.368 55.3675 716.379 148.508 753.094 236.341C789.692 323.918 840.878 406.269 888.416 482.748C950.888 583.256 1007.06 673.628 1015.62 752.548C1028.15 868.216 938.407 959.027 616.321 1020.5C365.665 1068.34 240.701 1161.86 194.44 1275.44L194.111 1274.43Z",
  ];

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.2, // Delay between each card
      },
    },
  };

  const cardVariants = {
    hidden: { opacity: 0, y: 100 }, // Start 100px below
    visible: {
      opacity: 1,
      y: 0,
      transition: {
        duration: 0.6,
        ease: "easeOut",
      },
    },
  };

  useEffect(() => {
    const scrollTo = location.state?.scrollTo;
    if (scrollTo) {
      const scrollToSection = () => {
        const element = document.getElementById(scrollTo);
        if (element) {
          const headerOffset = 80; // Adjust this based on your header height
          const elementPosition =
            element.getBoundingClientRect().top + window.scrollY;
          const offsetPosition = elementPosition - headerOffset;

          window.scrollTo({
            top: offsetPosition,
            behavior: "smooth",
          });
        }
      };

      setTimeout(scrollToSection, 300); // Increased delay slightly for safety
    }
  }, [location]);

  return (
    <main className="w-full px-[20px]">
      <div className="max-w-[1600px] mx-auto relative h-full">
        <div className="absolute w-auto -z-10 right-0">
          <svg
            width="1198.6"
            height="1300"
            viewBox="0 0 1198.6 1300"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            {paths.map((d, index) => (
              <motion.path
                key={index}
                d={d}
                stroke="#2cacc8"
                strokeWidth="0.5"
                fill="none"
                initial={{ pathLength: 0 }}
                animate={{ pathLength: 1 }}
                transition={{ duration: 2 + index * 0.5, ease: "easeInOut" }}
              />
            ))}
          </svg>
        </div>
        <motion.div
          ref={ref}
          className="w-full grid md:grid-cols-3 justify-center items-center gap-[20px] h-full pt-[60px] border-white "
          variants={containerVariants}
          initial="hidden"
          animate={isInView ? "visible" : "hidden"}
        >
          {services.map((service, index) => (
            <motion.div key={index} variants={cardVariants} id={service.id}>
              <Card
                title={service.title}
                media={service.media}
                description={service.description}
              />
            </motion.div>
          ))}
        </motion.div>
      </div>
    </main>
  );
};

export default Services;
